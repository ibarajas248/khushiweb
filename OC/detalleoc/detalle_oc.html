<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detalle Orden de Compra</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <header>
        <div class="back">
            <div class="menu container">
                <a href="#" class="logo">Logo</a>
                <input type="checkbox" id="menu">
                <label for="menu">
                    <img src="images/menu.png" class="menu-icono" alt="">
                </label>    
                <nav class="navbar">
                    <ul>
                        <li><a href="../index.html">Inicio</a></li>
                        <li><a href="../OC/OC.html">OC</a></li>
                        <li><a href="../productos/productos.html">Productos</a></li>
                        <li><a href="../Pronosticador/pronosticador.html">Pronosticador</a></li>
                        <li><a href="../Produccion/produccion.html">Producción</a></li>
                        <li><a href="reportes.html">Reportes</a></li>
                        <li><a href="perfil.html">Perfil</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>
    <main>
        <div class="ficha-container">
            <div class="product-details">
                <p><strong>ID de la OC:</strong> <span id="idOrdenCompra"></span></p>
                <p><strong>OC: </strong> <span id="ordendeCompra"></span></p>
                
            </div>

            <form id="form-agregar-operacion">
                <label for="lotes">Lotes:</label>
                <input type="number" id="lotes" name="lotes" required>
                <label for="cantidad">Cantidad:</label>
                <input type="number" id="Cantidad" name="Cantidad" required>
                <label for="productoSelect">Selecciona un producto:</label>
                <select id="productoSelect"></select>
                
            
                
                <button type="button" id="btnAgregarOperacion" class="back-button">Agregar Operación</button>

            </form>
                
                <!-- Agregar un mensaje de carga -->
                <p id="loading-message" style="display:none;">Cargando...</p>
                
                <!-- Agregar un mensaje de error/success -->
                <p id="response-message" style="display:none;"></p>

                
            

              
        </div>
        <div class="card" id="detalle-card">
            
            

            <h2>Lista de Productos de la Orden de Compra</h2>
        
        <table class= "tablaOc" border="1">
            <thead>
                <tr>
                    <th>ID_produccion</th>
                    <th>ID Orden</th>
                    <th>Nombre</th>
                    <th>Cantidad</th>
                    <th>Precio</th>
                </tr>
            </thead>
            <tbody id="productosBody">
            </tbody>
        </table>
        </div>
    </main>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const params = new URLSearchParams(window.location.search);
            const idOrdenCompra = params.get("id");
            const ordendeCompra = params.get("oc");

            if (idOrdenCompra && ordendeCompra) {
                document.getElementById("idOrdenCompra").textContent = idOrdenCompra;
                document.getElementById("ordendeCompra").textContent = decodeURIComponent(ordendeCompra);
            } else {
                document.getElementById("detalle-card").innerHTML = "<p>Error: Datos no disponibles</p>";
            }
        });
    </script>
    <script src="scriptdetalle.js"></script>
</body>
</html>
